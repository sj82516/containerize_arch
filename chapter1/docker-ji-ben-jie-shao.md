以下介紹與圖片，出自於 [The whole story - Docker, The linux container engine](/h ttp://scm.zoomquiet.top/data/20131004215734/index.html#)

# 什麼是Docker 

Docker 主要是基於 Linux LXC 技術開發，提供一個虛擬化的環境運行 Containers，Container \(譯作容器、或是貨櫃\)，顧名思義即是將內容物封裝的一種方式，封裝成容器後隔離了跟實體主機\(Host Machine\)耦合，不論是運行在個人筆電上、雲端伺服器上、虛擬機上等等，都會得到相同的運作機制。

Docker 常用於

1. 自動化打包與部屬應用程式
2. 打造私人、輕量的 PAAS\(Platform as Service\)環境
3. CI/CD
4. 部署並可擴展的服務

# 背景知識

在十幾年前，應用程式幾乎都是全部放在同一台實體主機上；  
而今日，開發者開始應用程式拆解，將不同可獨立運行的元件部署在不同的機器上，例如 Api Server、資料庫、快取資料庫被分散在不同的機器上。

分散在不同的機器上的好處是

1. 不同的應用程式有各自適合的環境，例如 Api Server 可能需要較高的 CPU運算能力、資料庫需要較多的記憶體跟硬碟空間等
2. 可以針對效能貧頸個別優化，Api Server 回應太慢可以增加多台 Servre 回應等

但多台機器，帶來管理上的困擾，同一個應用程式運行在不同的硬體上，可能會有許多不預期的錯誤發生，例如說每一位新人進來就必須要在本地端部署一份開發環境，安裝 MongoDB、Nodejs、Redis等，如果裝到不同的版本行為上可能就會不一樣，更別說如果是不同 OS 不同硬體，會有更多潛在的問題

將不同的服務 x 不同的機器會產生許多場景要去處理與測試，稱之為 matrix hell

![](/assets/matrix.jpg)

## 如何解決

回到 1960年代，當時的貨運業也遇到相同的困境，當貨物在工廠生產完畢，會需要先用貨車運送至火車站，接著火車一路到港口上船，接著在運行到世界各地；  
貨運業從農產品如大豆，到奢侈品如跑車，要處理的貨物各式各樣，有大有小、有貴有便宜，所以該如何運送是個大麻煩

![](/assets/standard_container.jpg)

幸運的最後找到了解法 **貨櫃**，不論是哪個類型的商品，一律裝載到標準尺寸的貨櫃當中，接著各個運輸工具就可以很方便的運載貨櫃，同時貨櫃的好處是可以被堆疊、有效率的移動、方便搬移等，因為這樣的改革也間接使世界貿易更加盛行。

他山之石可以攻錯，資訊界也運用相同的概念，將應用程式封裝到 Container\(慣例譯成 容器\)，往後就不太需要理會運行的宿主環境，專注於應用程式的開發，部署就全由容器化技術去煩惱。

> 對開發者來說，Build once run anywhere；對Devops來說，Configure once run anything.

#  Docker 內部技術的使用

剛剛是用概念性的方式介紹Docker 技術與嘗試解決的問題，接著看一下 Docker 內部技術的使用。

## 虛擬化

[虛擬化](https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E5%8C%96)是電腦科學的一項資源管理技術，主要是將實體資源\(如 CPU / Network/ Memory\)予以抽象、轉換後呈現出來並可供分割、組合為一個或多個電腦組態環境。

而 Docker，則是位於**作業系統層虛擬化 \(**Operating system–level virtualization**\)，**亦稱**容器化\(**Containerization**\)**











